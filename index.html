<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Taxi Platino App</title>
    
    <meta name="theme-color" content="#1B2A41">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="manifest" href="manifest.json">

    <style>
        :root {
            --navy: #1B2A41;
            --silver: #E0E0E0;
            --red: #D32F2F;
            --bg: #f4f6f8;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* HEADER: Texto Taxi Platino Restaurado */
        header {
            background: linear-gradient(135deg, var(--navy) 0%, #0d1620 100%);
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-title {
            color: white;
            font-weight: 900;
            font-size: 24px;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin: 0;
        }

        /* CONTENEDOR */
        main {
            padding: 15px;
            flex: 1;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            box-sizing: border-box;
        }

        /* TARJETAS */
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 15px;
            border-top: 4px solid var(--navy);
        }

        /* INPUTS */
        label {
            font-size: 13px;
            font-weight: 800;
            color: var(--navy);
            margin-bottom: 8px;
            display: block;
            text-transform: uppercase;
        }
        input[type="text"] {
            width: 100%;
            padding: 16px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 18px;
            background-color: #fff;
            box-sizing: border-box;
            -webkit-appearance: none; /* Fix para iOS */
        }
        input[type="text"]:focus {
            outline: none;
            border-color: var(--red);
            background-color: #fffafa;
        }

        /* EXTRAS */
        .extras-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 20px;
            margin-top: 10px;
        }
        .extra-btn {
            background: #f0f0f0;
            border: 1px solid #ddd;
            padding: 12px 5px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }
        .extra-btn span {
            display: block;
            font-size: 11px;
            font-weight: 800;
            color: #444;
        }
        .extra-btn small {
            display: block;
            font-size: 12px;
            color: var(--red);
            font-weight: bold;
        }
        .extra-btn.active {
            background-color: var(--navy);
            border-color: var(--navy);
            color: white;
        }
        .extra-btn.active span { color: white; }
        .extra-btn.active small { color: #FFD700; }

        /* BOTONES ACCI√ìN */
        .btn-cotizar {
            width: 100%;
            background: linear-gradient(145deg, #D32F2F, #B71C1C);
            color: white;
            padding: 20px;
            border: none;
            border-radius: 12px;
            font-size: 20px;
            font-weight: 900;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(211, 47, 47, 0.3);
            cursor: pointer;
            margin-top: 10px;
            /* Efecto pulsaci√≥n */
            position: relative;
            overflow: hidden;
        }
        .btn-cotizar:active {
            transform: scale(0.98);
        }
        
        .btn-limpiar {
            background: none;
            border: none;
            color: #888;
            text-decoration: underline;
            padding: 15px;
            width: 100%;
            font-size: 14px;
            cursor: pointer;
        }

        /* RESULTADOS */
        #resultado {
            display: none;
            text-align: center;
            background: #fff;
            border: 2px solid var(--navy);
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .res-precio { font-size: 60px; font-weight: 900; color: var(--navy); line-height: 1; margin: 10px 0; }
        .res-detalle { font-size: 14px; color: #555; border-top: 1px dashed #ccc; padding-top: 15px; margin-top: 15px; }

        .footer { text-align: center; font-size: 11px; color: #aaa; padding: 20px; }
    </style>
</head>
<body>

<header>
    <div class="header-title">TAXI PLATINO</div>
</header>

<main>
    <div class="card">
        <label>üìç Origen</label>
        <input type="text" id="input-origen" list="list-colonias" placeholder="Escribe para buscar..." autocomplete="off">
        
        <label>üèÅ Destino</label>
        <input type="text" id="input-destino" list="list-colonias" placeholder="Escribe para buscar..." autocomplete="off">

        <datalist id="list-colonias"></datalist>

        <div style="margin-top:15px; font-weight:bold; color:#555; font-size:14px;">SERVICIOS ADICIONALES</div>
        <div class="extras-grid">
            <div class="extra-btn" onclick="toggleExtra(this, 30)">
                <span>COMPRAS</span><small>+$30</small>
            </div>
            <div class="extra-btn" onclick="toggleExtra(this, 30)">
                <span>MOTEL</span><small>+$30</small>
            </div>
            <div class="extra-btn" onclick="toggleExtra(this, 20)">
                <span>HOTEL</span><small>+$20</small>
            </div>
        </div>

        <button class="btn-cotizar" onclick="cotizar()">Calcular Tarifa</button>
        <button class="btn-limpiar" onclick="limpiar()">Nueva Cotizaci√≥n</button>
    </div>

    <div class="card" id="resultado">
        <div style="font-size: 12px; color: #888;">COSTO TOTAL</div>
        <div class="res-precio" id="precio-display">$0</div>
        <div class="res-detalle" id="precio-info"></div>
    </div>
</main>

<div class="footer">Tarifas Oficiales 2026 ‚Ä¢ Taxi Platino App</div>

<script>
    // --- 1. MATRIZ DE PRECIOS COMPLETA ---
    const tarifas = {
        "1": {"1":40,"1A":45,"1B":60,"1C":65,"2":40,"2A":45,"3":50,"3A":55,"3B":60,"3C":70,"4":55,"5":60,"5A":60,"6":75,"7":80,"7A":85,"8":85,"8A":90,"9":65,"9A":70,"9B":90,"9C":95,"10":60,"10A":60,"10B":70,"11":55,"12":60,"13":65,"13A":80,"14":150,"15":150,"16":80,"17":60,"18":80,"19":100,"20":100},
        "1A": {"1":45,"1A":45,"1B":65,"1C":75,"2":45,"2A":50,"3":55,"3A":55,"3B":60,"3C":70,"4":60,"5":65,"5A":65,"6":80,"7":85,"7A":90,"8":90,"8A":100,"9":70,"9A":80,"9B":90,"9C":100,"10":65,"10A":65,"10B":75,"11":60,"12":65,"13":70,"13A":80,"14":150,"15":150,"16":80,"17":60,"18":80,"19":100,"20":100},
        "1B": {"1":60,"1A":65,"1B":50,"1C":70,"2":65,"2A":70,"3":75,"3A":75,"3B":85,"3C":90,"4":80,"5":90,"5A":90,"6":90,"7":90,"7A":95,"8":90,"8A":90,"9":70,"9A":70,"9B":85,"9C":90,"10":70,"10A":60,"10B":60,"11":75,"12":80,"13":75,"13A":80,"14":150,"15":150,"16":80,"17":60,"18":80,"19":100,"20":90},
        "1C": {"1":65,"1A":75,"1B":70,"1C":70,"2":70,"2A":80,"3":80,"3A":80,"3B":90,"3C":100,"4":85,"5":95,"5A":95,"6":95,"7":95,"7A":95,"8":90,"8A":100,"9":75,"9A":75,"9B":85,"9C":95,"10":80,"10A":80,"10B":80,"11":85,"12":85,"13":80,"13A":85,"14":150,"15":150,"16":85,"17":70,"18":80,"19":100,"20":90},
        "2": {"1":40,"1A":45,"1B":65,"1C":70,"2":40,"2A":40,"3":45,"3A":45,"3B":50,"3C":60,"4":50,"5":55,"5A":55,"6":70,"7":75,"7A":80,"8":80,"8A":85,"9":55,"9A":65,"9B":85,"9C":95,"10":50,"10A":50,"10B":60,"11":50,"12":55,"13":60,"13A":75,"14":150,"15":150,"16":85,"17":60,"18":80,"19":100,"20":100},
        "2A": {"1":45,"1A":50,"1B":70,"1C":80,"2":40,"2A":40,"3":40,"3A":45,"3B":50,"3C":55,"4":40,"5":50,"5A":50,"6":60,"7":65,"7A":70,"8":75,"8A":80,"9":50,"9A":65,"9B":85,"9C":95,"10":50,"10A":50,"10B":60,"11":40,"12":50,"13":55,"13A":70,"14":150,"15":150,"16":85,"17":65,"18":85,"19":110,"20":100},
        "3": {"1":50,"1A":55,"1B":75,"1C":80,"2":45,"2A":40,"3":40,"3A":40,"3B":45,"3C":50,"4":50,"5":55,"5A":55,"6":70,"7":70,"7A":80,"8":80,"8A":90,"9":60,"9A":80,"9B":90,"9C":100,"10":55,"10A":60,"10B":65,"11":50,"12":55,"13":60,"13A":70,"14":160,"15":160,"16":90,"17":70,"18":90,"19":110,"20":110},
        "3A": {"1":55,"1A":55,"1B":75,"1C":80,"2":45,"2A":45,"3":40,"3A":40,"3B":45,"3C":50,"4":55,"5":60,"5A":60,"6":70,"7":75,"7A":80,"8":80,"8A":90,"9":60,"9A":75,"9B":85,"9C":100,"10":55,"10A":60,"10B":70,"11":55,"12":60,"13":65,"13A":75,"14":160,"15":160,"16":90,"17":80,"18":90,"19":110,"20":110},
        "3B": {"1":60,"1A":60,"1B":85,"1C":90,"2":50,"2A":50,"3":45,"3A":45,"3B":40,"3C":45,"4":50,"5":60,"5A":60,"6":70,"7":75,"7A":85,"8":85,"8A":95,"9":65,"9A":75,"9B":95,"9C":110,"10":65,"10A":65,"10B":75,"11":60,"12":65,"13":70,"13A":75,"14":160,"15":160,"16":90,"17":80,"18":95,"19":110,"20":110},
        "3C": {"1":70,"1A":70,"1B":90,"1C":100,"2":60,"2A":55,"3":50,"3A":50,"3B":45,"3C":45,"4":55,"5":65,"5A":65,"6":80,"7":80,"7A":90,"8":90,"8A":100,"9":75,"9A":80,"9B":100,"9C":120,"10":70,"10A":70,"10B":80,"11":65,"12":70,"13":75,"13A":85,"14":170,"15":170,"16":100,"17":80,"18":120,"19":120,"20":110},
        "4": {"1":55,"1A":55,"1B":80,"1C":85,"2":50,"2A":40,"3":50,"3A":55,"3B":50,"3C":55,"4":40,"5":40,"5A":40,"6":50,"7":55,"7A":60,"8":70,"8A":80,"9":60,"9A":70,"9B":90,"9C":100,"10":50,"10A":60,"10B":65,"11":40,"12":40,"13":55,"13A":60,"14":160,"15":160,"16":100,"17":80,"18":100,"19":120,"20":120},
        "5": {"1":60,"1A":60,"1B":90,"1C":95,"2":55,"2A":50,"3":55,"3A":60,"3B":60,"3C":65,"4":40,"5":40,"5A":40,"6":40,"7":45,"7A":50,"8":60,"8A":70,"9":60,"9A":70,"9B":85,"9C":100,"10":50,"10A":60,"10B":65,"11":45,"12":40,"13":45,"13A":50,"14":170,"15":170,"16":100,"17":85,"18":100,"19":130,"20":130},
        "5A": {"1":60,"1A":65,"1B":90,"1C":95,"2":55,"2A":50,"3":55,"3A":60,"3B":60,"3C":65,"4":40,"5":40,"5A":40,"6":45,"7":50,"7A":55,"8":65,"8A":80,"9":65,"9A":70,"9B":90,"9C":100,"10":55,"10A":60,"10B":70,"11":45,"12":45,"13":50,"13A":55,"14":170,"15":170,"16":100,"17":85,"18":100,"19":130,"20":130},
        "6": {"1":75,"1A":80,"1B":90,"1C":95,"2":70,"2A":60,"3":70,"3A":70,"3B":70,"3C":80,"4":50,"5":40,"5A":45,"6":40,"7":40,"7A":45,"8":50,"8A":60,"9":60,"9A":70,"9B":85,"9C":100,"10":50,"10A":60,"10B":70,"11":50,"12":45,"13":45,"13A":50,"14":170,"15":170,"16":120,"17":95,"18":120,"19":140,"20":140},
        "7": {"1":80,"1A":85,"1B":90,"1C":95,"2":75,"2A":65,"3":70,"3A":75,"3B":75,"3C":80,"4":55,"5":45,"5A":50,"6":40,"7":40,"7A":40,"8":50,"8A":55,"9":60,"9A":70,"9B":85,"9C":100,"10":50,"10A":60,"10B":70,"11":50,"12":45,"13":45,"13A":45,"14":180,"15":180,"16":120,"17":95,"18":120,"19":140,"20":140},
        "7A": {"1":85,"1A":90,"1B":95,"1C":95,"2":80,"2A":70,"3":80,"3A":80,"3B":85,"3C":90,"4":60,"5":50,"5A":55,"6":45,"7":40,"7A":40,"8":50,"8A":60,"9":65,"9A":75,"9B":90,"9C":100,"10":55,"10A":65,"10B":75,"11":55,"12":50,"13":50,"13A":50,"14":180,"15":180,"16":120,"17":95,"18":120,"19":140,"20":140},
        "8": {"1":85,"1A":90,"1B":90,"1C":90,"2":75,"2A":75,"3":80,"3A":80,"3B":85,"3C":90,"4":70,"5":60,"5A":65,"6":50,"7":50,"7A":50,"8":40,"8A":50,"9":65,"9A":70,"9B":75,"9C":95,"10":60,"10A":65,"10B":70,"11":65,"12":60,"13":60,"13A":55,"14":180,"15":180,"16":120,"17":95,"18":120,"19":140,"20":140},
        "8A": {"1":90,"1A":100,"1B":90,"1C":100,"2":85,"2A":80,"3":90,"3A":90,"3B":95,"3C":100,"4":80,"5":70,"5A":80,"6":60,"7":55,"7A":60,"8":50,"8A":50,"9":70,"9A":70,"9B":75,"9C":90,"10":70,"10A":70,"10B":75,"11":70,"12":65,"13":65,"13A":60,"14":170,"15":170,"16":110,"17":95,"18":120,"19":140,"20":140},
        "9": {"1":65,"1A":70,"1B":70,"1C":75,"2":55,"2A":50,"3":60,"3A":60,"3B":65,"3C":75,"4":60,"5":60,"5A":65,"6":60,"7":60,"7A":65,"8":65,"8A":70,"9":40,"9A":45,"9B":70,"9C":80,"10":45,"10A":45,"10B":50,"11":55,"12":55,"13":45,"13A":55,"14":160,"15":160,"16":90,"17":85,"18":95,"19":120,"20":120},
        "9A": {"1":70,"1A":80,"1B":70,"1C":75,"2":65,"2A":65,"3":80,"3A":75,"3B":75,"3C":80,"4":70,"5":70,"5A":70,"6":70,"7":70,"7A":75,"8":70,"8A":70,"9":45,"9A":50,"9B":70,"9C":80,"10":55,"10A":50,"10B":50,"11":60,"12":60,"13":55,"13A":60,"14":160,"15":160,"16":95,"17":85,"18":95,"19":120,"20":120},
        "9B": {"1":90,"1A":90,"1B":85,"1C":85,"2":85,"2A":85,"3":90,"3A":85,"3B":95,"3C":100,"4":90,"5":85,"5A":90,"6":85,"7":85,"7A":90,"8":75,"8A":75,"9":70,"9A":70,"9B":70,"9C":80,"10":75,"10A":75,"10B":75,"11":80,"12":80,"13":75,"13A":75,"14":170,"15":170,"16":120,"17":90,"18":120,"19":130,"20":130},
        "9C": {"1":95,"1A":100,"1B":90,"1C":95,"2":95,"2A":95,"3":100,"3A":100,"3B":110,"3C":120,"4":90,"5":100,"5A":100,"6":100,"7":100,"7A":100,"8":95,"8A":90,"9":80,"9A":80,"9B":80,"9C":80,"10":85,"10A":85,"10B":85,"11":90,"12":90,"13":90,"13A":85,"14":180,"15":180,"16":130,"17":100,"18":130,"19":140,"20":130},
        "10": {"1":60,"1A":65,"1B":70,"1C":80,"2":50,"2A":50,"3":55,"3A":55,"3B":65,"3C":70,"4":50,"5":50,"5A":55,"6":50,"7":50,"7A":55,"8":60,"8A":70,"9":45,"9A":55,"9B":75,"9C":85,"10":40,"10A":45,"10B":50,"11":45,"12":45,"13":40,"13A":50,"14":150,"15":150,"16":100,"17":85,"18":100,"19":120,"20":120},
        "10A": {"1":60,"1A":65,"1B":60,"1C":80,"2":50,"2A":50,"3":60,"3A":60,"3B":65,"3C":70,"4":60,"5":60,"5A":60,"6":60,"7":60,"7A":65,"8":65,"8A":70,"9":45,"9A":50,"9B":75,"9C":85,"10":45,"10A":45,"10B":50,"11":50,"12":50,"13":45,"13A":55,"14":160,"15":160,"16":100,"17":85,"18":100,"19":120,"20":120},
        "10B": {"1":70,"1A":75,"1B":60,"1C":80,"2":60,"2A":60,"3":65,"3A":70,"3B":75,"3C":80,"4":65,"5":65,"5A":70,"6":70,"7":70,"7A":75,"8":70,"8A":75,"9":50,"9A":50,"9B":75,"9C":85,"10":50,"10A":50,"10B":50,"11":55,"12":55,"13":50,"13A":65,"14":170,"15":170,"16":100,"17":90,"18":100,"19":120,"20":120},
        "11": {"1":55,"1A":60,"1B":75,"1C":85,"2":50,"2A":40,"3":50,"3A":55,"3B":60,"3C":65,"4":40,"5":45,"5A":45,"6":50,"7":50,"7A":55,"8":65,"8A":70,"9":55,"9A":60,"9B":80,"9C":90,"10":45,"10A":50,"10B":55,"11":40,"12":40,"13":45,"13A":60,"14":160,"15":160,"16":100,"17":80,"18":100,"19":120,"20":120},
        "12": {"1":60,"1A":65,"1B":80,"1C":85,"2":55,"2A":50,"3":55,"3A":60,"3B":65,"3C":70,"4":40,"5":40,"5A":45,"6":45,"7":45,"7A":50,"8":60,"8A":65,"9":55,"9A":60,"9B":80,"9C":90,"10":45,"10A":50,"10B":55,"11":40,"12":40,"13":40,"13A":50,"14":170,"15":170,"16":100,"17":85,"18":100,"19":120,"20":120},
        "13": {"1":65,"1A":70,"1B":75,"1C":80,"2":60,"2A":55,"3":60,"3A":65,"3B":70,"3C":75,"4":55,"5":45,"5A":50,"6":45,"7":45,"7A":50,"8":60,"8A":65,"9":45,"9A":55,"9B":75,"9C":90,"10":40,"10A":45,"10B":50,"11":40,"12":40,"13":40,"13A":45,"14":170,"15":170,"16":100,"17":90,"18":100,"19":120,"20":120},
        "13A": {"1":80,"1A":80,"1B":80,"1C":85,"2":75,"2A":70,"3":70,"3A":75,"3B":75,"3C":85,"4":60,"5":50,"5A":55,"6":50,"7":45,"7A":50,"8":55,"8A":60,"9":55,"9A":60,"9B":75,"9C":85,"10":50,"10A":55,"10B":65,"11":60,"12":50,"13":45,"13A":45,"14":170,"15":160,"16":120,"17":95,"18":110,"19":130,"20":140},
        "14": {"1":150,"1A":150,"1B":150,"1C":150,"2":150,"2A":150,"3":160,"3A":160,"3B":160,"3C":170,"4":160,"5":170,"5A":170,"6":170,"7":180,"7A":180,"8":180,"8A":170,"9":160,"9A":160,"9B":170,"9C":180,"10":150,"10A":160,"10B":170,"11":140,"12":170,"13":170,"13A":170,"14":150,"15":150,"16":150,"17":150,"18":150,"19":150,"20":150},
        "15": {"1":150,"1A":150,"1B":150,"1C":150,"2":150,"2A":150,"3":160,"3A":160,"3B":160,"3C":170,"4":160,"5":170,"5A":170,"6":170,"7":180,"7A":180,"8":180,"8A":170,"9":160,"9A":160,"9B":170,"9C":180,"10":150,"10A":160,"10B":170,"11":130,"12":170,"13":170,"13A":160,"14":150,"15":150,"16":130,"17":130,"18":130,"19":130,"20":150},
        "16": {"1":80,"1A":80,"1B":80,"1C":85,"2":85,"2A":85,"3":90,"3A":90,"3B":90,"3C":100,"4":100,"5":100,"5A":100,"6":120,"7":120,"7A":120,"8":120,"8A":110,"9":90,"9A":95,"9B":120,"9C":130,"10":100,"10A":100,"10B":100,"11":90,"12":100,"13":100,"13A":120,"14":150,"15":130,"16":60,"17":80,"18":80,"19":95,"20":150},
        "17": {"1":60,"1A":60,"1B":60,"1C":70,"2":60,"2A":65,"3":70,"3A":80,"3B":80,"3C":80,"4":80,"5":85,"5A":85,"6":95,"7":95,"7A":95,"8":95,"8A":95,"9":85,"9A":85,"9B":90,"9C":100,"10":85,"10A":85,"10B":90,"11":80,"12":85,"13":90,"13A":95,"14":150,"15":130,"16":80,"17":60,"18":80,"19":100,"20":100},
        "18": {"1":80,"1A":80,"1B":80,"1C":80,"2":80,"2A":85,"3":90,"3A":90,"3B":95,"3C":120,"4":100,"5":100,"5A":100,"6":120,"7":120,"7A":120,"8":120,"8A":120,"9":95,"9A":95,"9B":120,"9C":130,"10":100,"10A":100,"10B":100,"11":90,"12":100,"13":100,"13A":110,"14":150,"15":130,"16":80,"17":80,"18":80,"19":100,"20":100},
        "19": {"1":100,"1A":100,"1B":100,"1C":100,"2":100,"2A":110,"3":110,"3A":110,"3B":110,"3C":120,"4":120,"5":130,"5A":130,"6":140,"7":140,"7A":140,"8":140,"8A":140,"9":120,"9A":120,"9B":130,"9C":140,"10":120,"10A":120,"10B":120,"11":110,"12":120,"13":120,"13A":130,"14":150,"15":130,"16":95,"17":100,"18":100,"19":100,"20":150},
        "20": {"1":100,"1A":100,"1B":90,"1C":90,"2":100,"2A":100,"3":110,"3A":110,"3B":110,"3C":110,"4":120,"5":130,"5A":130,"6":140,"7":140,"7A":140,"8":140,"8A":140,"9":120,"9A":120,"9B":130,"9C":130,"10":120,"10A":120,"10B":120,"11":110,"12":120,"13":120,"13A":140,"14":150,"15":150,"16":150,"17":100,"18":100,"19":150,"20":100}
    };

    // --- 2. LISTA DE COLONIAS ---
    const coloniasData = [
        {"n":"TLALCUALOYA", "s":"1"}, {"n":"UN PASO A LA GLORIA", "s":"1A"},
        {"n":"CHICHONAL", "s":"1A"}, {"n":"8 DE MAYO", "s":"1C"},
        {"n":"ROSALINDA", "s":"2"}, {"n":"GUAYACANAL", "s":"3"},
        {"n":"OBRERA", "s":"5A"}, {"n":"INSURGENTES NTE", "s":"1"},
        {"n":"FOVISSTE", "s":"1A"}, {"n":"PATRIA LIBRE 2 SECC", "s":"10"},
        {"n":"INSURGENTES SUR", "s":"2"}, {"n":"COL.HIDALGO", "s":"3"},
        {"n":"RUIZ CORTINES", "s":"4"}, {"n":"POPULAR", "s":"5A"},
        {"n":"LAS DELICIAS", "s":"1"}, {"n":"F.GUTIERREZ", "s":"1A"},
        {"n":"FCO I. MADERO (1C)", "s":"1C"}, {"n":"FRACC. CRISTAL", "s":"2"},
        {"n":"MARTIRES DE CHICAGO", "s":"3"}, {"n":"PALMAR", "s":"4"},
        {"n":"16 DE SEPTIEMBRE", "s":"1"}, {"n":"CERRO ALTO", "s":"1A"},
        {"n":"VERACRUZ", "s":"1C"}, {"n":"LAS FUENTES", "s":"2"},
        {"n":"FRACC. CASINO", "s":"3"}, {"n":"AURORA", "s":"4"},
        {"n":"LUIS ECHEVERRIA", "s":"1"}, {"n":"BENITO JUAREZ", "s":"1"},
        {"n":"EL ENCINAL", "s":"1A"}, {"n":"CENTRO", "s":"5"},
        {"n":"JARDINES DE TLAL", "s":"1"}, {"n":"EL MANGAL", "s":"1"},
        {"n":"SALINAS DE GORTARI", "s":"1B"}, {"n":"CUALIPAN", "s":"2A"},
        {"n":"VILLAS DEL SOL", "s":"3A"}, {"n":"VICENTE GUERRERO", "s":"3B"},
        {"n":"FCO I, MADERO (3B)", "s":"3B"}, {"n":"PLAYON", "s":"5"},
        {"n":"GUAYABAL", "s":"5"}, {"n":"CUAHUTEMOC", "s":"7"},
        {"n":"ESMERALDA", "s":"1"}, {"n":"PATRIA LIBRE 1 SECC", "s":"1B"},
        {"n":"NUEVA MINA SUR", "s":"2A"}, {"n":"NUEVA ESPERANZA", "s":"3B"},
        {"n":"FRAMBOYAN", "s":"1"}, {"n":"JAGUEY", "s":"3C"},
        {"n":"FRACC, FLORESTA", "s":"3B"}, {"n":"GRAVERA", "s":"7A"},
        {"n":"AMPLIACION HIDALGO", "s":"3B"}, {"n":"SERGIO MARTINEZ", "s":"7A"},
        {"n":"PRADERAS DEL JAGUEY", "s":"3B"}, {"n":"EJIDO TACOTENO", "s":"8"},
        {"n":"INFONAVIT", "s":"9"}, {"n":"MAPACHAPA", "s":"9C"},
        {"n":"BUENA VISTA SUR", "s":"11"}, {"n":"LOS MANGOS", "s":"14"},
        {"n":"REST. LAS FLORES", "s":"17"}, {"n":"COLOSIO", "s":"19"},
        {"n":"SALUBRIDAD", "s":"8"}, {"n":"SEBASTIAN", "s":"8"},
        {"n":"AGUSTIN MELGAR 1A", "s":"9"}, {"n":"NUEVA MINA NORTE", "s":"11"},
        {"n":"STA. CLARA PTE.", "s":"11"}, {"n":"VILLAS DEL VERGEL", "s":"14"},
        {"n":"EL ARENAL", "s":"14"}, {"n":"LOS ARCOS", "s":"17"},
        {"n":"MARTIN LANCERO", "s":"17"}, {"n":"FRACC. ARBOLEDAS", "s":"19"},
        {"n":"SEC.FEDERAL 1", "s":"8"}, {"n":"AGUSTIN MELGAR 2A", "s":"9A"},
        {"n":"BUENA VISTA NORTE", "s":"10"}, {"n":"BOHEMIA", "s":"11"},
        {"n":"CHAPALA", "s":"11"}, {"n":"GUTIERREZ BARRIOS", "s":"14"},
        {"n":"C-4", "s":"17"}, {"n":"J. DE LAS FLORES", "s":"17"},
        {"n":"CIRILO VAZQUEZ", "s":"20"}, {"n":"COL. MEXICO", "s":"9A"},
        {"n":"SAN CARLOS", "s":"10"}, {"n":"SANTO DOMINGO", "s":"11"},
        {"n":"LAS PALMITAS", "s":"20"}, {"n":"DIVISION DEL NORTE", "s":"9A"},
        {"n":"L. DE SAN AGUSTIN", "s":"15"}, {"n":"CEISA", "s":"20"},
        {"n":"COSTA DE MARFIL", "s":"8A"}, {"n":"COL, AZTECA", "s":"9A"},
        {"n":"RESID. MONTE ALTO", "s":"15"}, {"n":"LAS ROSAS", "s":"18"},
        {"n":"EJIDO LA BOMBA", "s":"20"}, {"n":"ARRIOJA", "s":"8A"},
        {"n":"DIAZ ORDAZ 1A", "s":"10A"}, {"n":"NUEVA TACOTENO", "s":"12"},
        {"n":"SAN PEDRO MARTIR", "s":"15"}, {"n":"NARANJITO", "s":"18"},
        {"n":"ZACATAL", "s":"20"}, {"n":"BASURERO ORIENTE", "s":"8A"},
        {"n":"OAXAQUE√ëA", "s":"9B"}, {"n":"DIAZ ORDAZ 2A", "s":"10A"},
        {"n":"STA. CLARA OTE", "s":"12"}, {"n":"ALDANA", "s":"18"},
        {"n":"ENCINO GORDO", "s":"20"}, {"n":"PORSA", "s":"8A"},
        {"n":"SUBESTACION", "s":"8A"}, {"n":"EMILIANO ZAPATA", "s":"9B"},
        {"n":"CONGRESO", "s":"9B"}, {"n":"7 DE MAYO", "s":"10A"},
        {"n":"PECOSA", "s":"10A"}, {"n":"JARD. DEL BOSQUE", "s":"16"},
        {"n":"LA VERONICA", "s":"18"}, {"n":"LOS ENCINOS", "s":"18"},
        {"n":"JOSEFA OLIVARES", "s":"8A"}, {"n":"BASURERO PONIENTE", "s":"9B"},
        {"n":"20 DE NOVIEMBRE", "s":"13"}, {"n":"SECCION 32", "s":"16"},
        {"n":"JACARANDAS", "s":"18"}, {"n":"PROL. SAN FRANCISCO", "s":"8A"},
        {"n":"GUADALUPANA", "s":"8A"}, {"n":"10 DE MAYO", "s":"9B"},
        {"n":"SAN ANTONIO", "s":"9B"}, {"n":"DIAZ ORDAZ 2A (10B)", "s":"10B"},
        {"n":"DE LOS MAESTRO", "s":"13"}, {"n":"COL. PETROLERA", "s":"13"},
        {"n":"PLANTA DE THINER", "s":"16"}, {"n":"LOS NARANJOS", "s":"16"},
        {"n":"DIEZ", "s":"18"}, {"n":"LOS COCOS", "s":"18"},
        {"n":"DIANA LAURA", "s":"8A"}, {"n":"COL CO2 LIQUID", "s":"10B"},
        {"n":"NI√ëOS HEROES", "s":"10B"}, {"n":"EDUARDO SOTO", "s":"13A"},
        {"n":"COSOLEACAQUE", "s":"14"}
    ];

    coloniasData.sort((a, b) => a.n.localeCompare(b.n));

    // --- CARGA DE COLONIAS OPTIMIZADA ---
    // Creamos todas las opciones de una sola vez para evitar errores de carga
    const dataList = document.getElementById('list-colonias');
    const opcionesHTML = coloniasData.map(c => `<option value="${c.n}">`).join('');
    dataList.innerHTML = opcionesHTML;

    let extraTotal = 0;

    function toggleExtra(btn, costo) {
        btn.classList.toggle('active');
        if (btn.classList.contains('active')) {
            extraTotal += costo;
        } else {
            extraTotal -= costo;
        }
    }

    // Buscador: Ahora limpia espacios al inicio/final por si el teclado autocorrige
    function getSector(nombre) {
        if (!nombre) return null;
        const nombreLimpio = nombre.trim().toUpperCase();
        const found = coloniasData.find(c => c.n.toUpperCase() === nombreLimpio);
        return found ? found.s : null;
    }

    function cotizar() {
        const inputOrigen = document.getElementById('input-origen').value;
        const inputDestino = document.getElementById('input-destino').value;
        const divResultado = document.getElementById('resultado');
        const txtPrecio = document.getElementById('precio-display');
        const txtInfo = document.getElementById('precio-info');

        const secOrigen = getSector(inputOrigen);
        const secDestino = getSector(inputDestino);

        if (!secOrigen) {
            alert("‚ùå No encontramos la colonia de ORIGEN. Selecci√≥nala de la lista.");
            return;
        }
        if (!secDestino) {
            alert("‚ùå No encontramos la colonia de DESTINO. Selecci√≥nala de la lista.");
            return;
        }

        let precioBase = 0;
        let encontrado = false;

        if (tarifas[secOrigen] && tarifas[secOrigen][secDestino]) {
            precioBase = tarifas[secOrigen][secDestino];
            encontrado = true;
        } else if (tarifas[secDestino] && tarifas[secDestino][secOrigen]) {
            precioBase = tarifas[secDestino][secOrigen];
            encontrado = true;
        }
        
        // Excepci√≥n Cosoleacaque
        if (!encontrado && (secOrigen === "14" || secDestino === "14")) {
            precioBase = 150;
            encontrado = true;
        }

        if (encontrado) {
            const costoFinal = precioBase + extraTotal;
            txtPrecio.innerText = `$${costoFinal}`;
            let detalle = `<strong>Ruta:</strong> ${inputOrigen} ‚ûî ${inputDestino}`;
            detalle += `<br><strong>Tarifa Base:</strong> $${precioBase}`;
            if (extraTotal > 0) detalle += `<br><strong>Extras:</strong> +$${extraTotal}`;
            
            txtInfo.innerHTML = detalle;
            divResultado.style.display = "block";
            // Scroll autom√°tico al resultado
            divResultado.scrollIntoView({ behavior: 'smooth', block: 'end' });
        } else {
            alert("‚ö†Ô∏è Ruta no encontrada en la base de datos.");
        }
    }

    function limpiar() {
        document.getElementById('input-origen').value = '';
        document.getElementById('input-destino').value = '';
        document.getElementById('resultado').style.display = 'none';
        extraTotal = 0;
        document.querySelectorAll('.extra-btn').forEach(btn => btn.classList.remove('active'));
    }
    
    // SW Registro
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js').catch(err => console.log('SW fallo', err));
        });
    }
</script>
</body>
</html>